<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"  initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>ПТЦА ДЗ</title>
</head>
<body>
    <header>
        <h1>Игра "Орел и Решка"</h1>
    </header>
    <div>
      <h2>Условие победы: два  раза выпадает "орел" или два раза выпадает "решка".</h2>
      <label for="inputNum"><h3>Введите количество партий: </h3></label>
      <input type="text" id="inputNum" name="inputNum" required minlength="4" maxlength="8" size="10"><br />
      <label for="leftNum"><h3>Осталось партий: </h3></label>
      <input type="text" id="leftNum" name="leftNum" required minlength="4" maxlength="8" size="10" disabled="true" >
  </div>

    <button id="next" onclick="show()">ввод</button>

    <div class="container d-flex justify-content-center">
      <div class="row justify-content-center">
        <div class="col-4 image" style="visibility: hidden;">
            <img id="coin" src="images/coin_flip.gif">
        </div>
        <div class="col-4 justify-content-center">

              <table id="results" class="table table-bordered" style="visibility: hidden;  width: 100px;"  >
                <thead>
                    <tr>
                      <th scope="col">Раунд №</th>
                      <th scope="col">Пользователь</th>
                      <th scope="col">Соперник</th>
                      <th scope="col">Победитель</th>
                    </tr>
                  </thead>
            </table>

        </div>
        <div class="col-4 image" style="visibility: hidden;">
                <img id = "coin" src="images/rotate_coin.gif">
        </div>
    </div>
    </div>

    <script> /* При необходимости можем скрпит в отдельный файл закинуть*/
      var num = 0;
      document.getElementById('leftNum').value = "";
      function show() { /* Функция с анимациями бросков*/
        var counter = document.getElementById('inputNum').value;
        if (counter-num > 0) {
          num++;
          document.getElementById('next').style.visibility = 'inline';
          document.getElementsByClassName('image')[0].style.visibility = "visible";
          document.getElementsByClassName('image')[1].style.visibility = "visible";
          document.getElementById('inputNum').disabled = true;
          setTimeout(showTable, 1500);
          setTimeout(hide, 1400);



          document.getElementById('leftNum').value = counter - num;
          if (counter - num==0){
            setTimeout(ending, 1800);
          }
        }
        else {
          alert("Введите количество попыток большее нуля!");
        }

          function hide() {
              document.getElementsByClassName('image')[0].style.visibility = "hidden";
              document.getElementsByClassName('image')[1].style.visibility = "hidden";
          }
          function showTable() {
              document.getElementById('results').style.visibility = "visible";

              var tableRow = document.getElementById("results");
              var row = tableRow.insertRow(1);
              var cell1 = row.insertCell(0);
              var cell2 = row.insertCell(1);
              var cell3 = row.insertCell(2);
              var cell4 = row.insertCell(3);
              a = Math.round(Math.random());
              b = Math.round(Math.random())
              cell1.innerHTML = num;
              if (a==1) {cell2.innerHTML = "ОРЁЛ";}
              else{cell2.innerHTML = "РЕШКА";}
              if (b==1) {cell3.innerHTML = "ОРЁЛ";}
              else{cell3.innerHTML = "РЕШКА";}
              if (a==b) {cell4.innerHTML = "Пользователь";}
              else{cell4.innerHTML = "Соперник";}

          }
          function ending() {
            document.getElementById('next').disabled = true;
            alert("Игра закончена!")
          }

      }
  </script>

</body>
</html>
